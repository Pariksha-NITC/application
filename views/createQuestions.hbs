<html>
<head>
<script>
	var schoice=`
        <div id="qstn"> Question <textarea name="question" cols="100" rows="4" id="question" onclick="clearField('question')"> Type in Question ... </textarea>
        </div>
        <div id="options">
            <div id="optionsSoFar"></div>
            <textarea name="option" cols="100" rows="2" id="option" onclick="clearField('option')"> Type in Option ... </textarea> <button style="border-radius:5px;width:max-content;height: fit-content;" onclick="createOption('single')">Create Option</button>
        </div>
        <div id="limits">
            <p>Duration : <input type="text"> minutes </p>
            <p>Marks : <input type="text"> marks </p>
            <p>Feedback :</p> 
            <p><textarea name="feedback" cols="100" rows="1" id="feedback" onclick="clearField('feedback')"> Feedback ... </textarea></p>
        </div>
        `;
        var mchoice=`
        <div id="qstn"> Question <textarea name="question" cols="100" rows="4" id="question" onclick="clearField('question')"> Type in Question ... </textarea>
        </div>
        <div id="options">
            <div id="optionsSoFar"></div>
            <textarea name="option" cols="100" rows="2" id="option" onclick="clearField('option')"> Type in Option ... </textarea> <button style="border-radius:5px;width:max-content;height: fit-content;" onclick="createOption('multi')">Create Option</button>
        </div>
        <div id="limits">
            <p>Duration : <input type="text"> minutes </p>
            <p>Marks : <input type="text"> marks </p>
            <p>Feedback :</p> 
            <p><textarea name="feedback" cols="100" rows="1" id="feedback" onclick="clearField('feedback')"> Feedback ... </textarea></p>
        </div>
        `;
        var subjective=`
        <div id="qstn"> Question <textarea name="question" cols="100" rows="4" id="question" onclick="clearField('question')"> Type in Question ... </textarea>
        </div>
        <div id="limits">
            <p>Duration : <input type="text"> minutes </p>
            <p>Marks : <input type="text"> marks </p>
            <p>Feedback :</p> 
            <p><textarea name="feedback" cols="100" rows="1" id="feedback" onclick="clearField('feedback')"> Feedback ... </textarea></p>
        </div>
        `;
        var integer=`
        <div id="qstn"> Question <textarea name="question" cols="100" rows="4" id="question" onclick="clearField('question')"> Type in Question ... </textarea>
        </div>
        <div id="limits">
            <p>Answer : <input type="text"> </p>
            <p>Precision : <input type="text"> to <input type="text"> </p>
            <p>Duration : <input type="text"> minutes </p>
            <p>Marks : <input type="text"> marks </p>
            <p>Feedback :</p> 
            <p><textarea name="feedback" cols="100" rows="1" id="feedback" onclick="clearField('feedback')"> Feedback ... </textarea></p>
        </div>
        `;
        function createOption(type){
            var x=document.getElementById('option').value;
            if(x==''){
                alert("Field can't be empty");
            }
            else{
                var old=document.getElementById('optionsSoFar').innerHTML;
                if(old==''){
                    if(type=='single'){
                        old+='<p> Choose one of these options : </p><br>' ;
                    }
                    else{
                        old+='<p> Choose options : </p><br>' ;
                    }
                }
                if(type=='single'){
                    old+='<p> <input type="radio" name="option">'+x+'</p><br>';
                }
                else{
                    old+='<p> <input type="checkbox" name="option">'+x+'</p><br>';
                }
                document.getElementById('optionsSoFar').innerHTML=old;
            }
        }
        function caterType(type){
            var x=type.options[type.selectedIndex].value;
            if(x=='schoice'){
                document.getElementById('holds').innerHTML=schoice;
            }
            else if(x=='mchoice'){
                document.getElementById('holds').innerHTML=mchoice;
            }
            else if(x=='integer'){
                document.getElementById('holds').innerHTML=integer;
            }
            else if(x=='subjective'){
                document.getElementById('holds').innerHTML=subjective;
            }
        }
function toggleRightPanel()
{
	if(document.getElementById("right_panel").style.display=="inline")
	{
		document.getElementById("right_panel").style.display="none";
		document.getElementById("questions_panel").style.display="grid";
		document.getElementById("main_area").style.width="100%";
	}
	else
	{
		document.getElementById("evaluation_panel").style.display="none";
		document.getElementById("right_panel").style.display="inline";
		document.getElementById("questions_panel").style.display="grid";
		document.getElementById("main_area").style.width="79.25%";
	}
}
function toggleEvalPanel()
{
	if(document.getElementById("evaluation_panel").style.display=="inline")
	{
		document.getElementById("evaluation_panel").style.display="none";
		document.getElementById("questions_panel").style.display="grid";
		document.getElementById("main_area").style.width="100%";
	}
	else
	{
		document.getElementById("evaluation_panel").style.display="inline";
		document.getElementById("right_panel").style.display="none";
		document.getElementById("questions_panel").style.display="grid";
		document.getElementById("main_area").style.width="70%";
	}
}
function hideRightPanel()
{
	document.getElementById("right_panel").style.display="none";
	document.getElementById("question_area").style.width="100%";
}
</script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/style.css">
<style>
body{
	margin: 0px;
}
#right_panel
{
	display: none;
	border-left:2px solid black;
	border-bottom:2px solid black;
	background-color:white;
	width:20.4%;
	float:right;
	height:75%;
	z-index: 2;
}

#evaluation_panel
{
	display: none;
	border-left:2px solid black;
	border-bottom:2px solid black;
	background-color:white;
	width:29%;
	float:right;
	height:75%;
	z-index: 2;
}

#questions_panel
{
	!display: none;
	grid-template-columns: auto auto auto;
	column-gap:10%;
	row-gap:5%;
	z-index: 3;
	margin-top:8px;
	padding:5px;
}
.qn_button{
background-color:#e9e9e9;
//flex: 0 1 21%;
	border : 1px solid grey;
	padding:15px;
	margin:4px;
	border-radius:10px 0px 0px 0px;
	text-align:center;
	height:85%;
	width:85%;
	cursor:pointer;
	box-shadow : 5px 5px 5px lightgrey;
}
.qn_button:hover{
//transition-duration:0.05s;
	font-size:17px;
	margin:0px;
	//background-color:#f1f1e7;
	box-shadow : 7px 7px 5px lightgrey;
}
#navbar{
	display: flex;
	flex-direction:row-reverse;
	//position: sticky;
    background-color: #d6d6ef;
	border-bottom:1px solid black;
    background-color:#dccae0;
	//border-top:0px;
    //top: 0;
    height: clamp(55px, 10vh, 55px);
    
}
.navbar_items{
	margin:10px;
	border-radius:25px;
	border: 1px solid #3333cc;
	color:#3333cc;
	cursor:pointer;
}
.navbar_items:hover{
	background-color: #3333cc;
	font-size:16px;
	color:white;
}
#app_header{
	background-color:#d6d6f5;
	color:#3333cc;
	height: clamp(45px, 9vh, 55px);
	text-transform:uppercase;
	font-size:20px;
	letter-spacing:2px;
	text-align:center;
	padding-top:15px;
	//padding-bottom:20px;
	font-family:sans-serif;
	//border-bottom: 1px solid black;
}
#main_area{
	//background-color:#ffffed;
	height:75%;
	width:79.25%;
	float:left;
	//margin-bottom:5%;
	//padding:10px;
	//border-bottom: 5px solid black;
	z-index:1;
	
}
#details{
            height: 50vh;
            display: flex;
            justify-content: left ;            
            background-color: #dccae0;
            height: 2%;
            padding: 2% 5%;
            flex-direction: column;
        }
#question_type_area{
	padding:10px;
	border-bottom: 1px solid black;
	
}
#question_description{
	padding:1%;
	word-wrap:break-word;
	//padding-right:25%
	height:35%;
	width:78%;
	//border:2px solid black;
	float:left;
	height:48%;
	//margin:15%;
	//margin-top:50%;
	overflow:auto;
}
#time_panel{
	text-align:center;
	border-bottom:2px solid black;
	//border: 2px solid black;
}
#action_items{
	
}
#response_panel
{
	clear:both;
	//margin-top:21.5%;
	margin-bottom:0%;
	padding:0.5%;
	background-color:#dccae0;
	height:28%;
	z-index:1;
	width:99%;
}
#Marks_section{
	padding:1%;
	float:right;
	text-align:center;
	height:41%;
	z-index:2;
	width:18%;
	margin-top:1.2%;
	background-color:rgba(0,120,120,0.1);
}
#right_panel2{
	float:right;
}
#details{
	background: rgba(175, 50, 80, 0.2);
	color:black;
	height: clamp(35px, 8vh, 35px);
	font-size:17px;
	padding-top:15px;
	padding-left:3%;
	margin:0px;
	font-family:sans-serif;
}
#qstn{
            display: flex;
            justify-content: space-evenly;            
            align-items: left;
            background-color: #a3fdee;
			height: 20%;
			padding: 2% 5%;
        }

        #options{
            justify-content: space-around;            
            align-items: left;
            background-color: #a3fdee;
			height: 15%;
			padding: 2% 5%;
            flex-direction: column;
        }

        #limits{
            justify-content: space-around;            
            align-items: left;
            background-color: #a3fdee;
			height: 30%;
			padding: 1% 5%;
            flex-direction: column;
        }

		#action_area{
	        padding:10px;
            display:flex;
            border-top: 2px solid rgb(216, 62, 62);
            float:down;
            gap :10px;
            z-index:1;
        }
</style>
</head>
<body>
<!--<div id="app_header">
	Pariksha-NITC
</div>
<div id="details">
	Quiz 1
</div>-->
	<nav class="nav-bar">
        <div class="title">
            <h3>Pariksha-NITC</h3>
        </div>
        <div class="nav-links-container">
            <a href="/" class="nav-link">Home</a>
            <a href="/logout" class="nav-link">Logout</a>
        </div>
        <div class="burger">
            <div class="line1"></div>
            <div class="line2"></div>
            <div class="line3"></div>
        </div>
    </nav>
	<nav id="navbar">
		<nav id="navbar">
			<button class="navbar_items" onclick="toggleRightPanel();" >Qns Panel</button>
			<button class="navbar_items" onclick="toggleEvalPanel();" > Instructions</button>
		</nav>
	</nav>

<!-- <div id = "right_panel"> 
	 <button class="close_button" onclick="hideRightPanel();" style="display:none;" >Close </button> 
	<div id ="main_area">
		<div id="question_type_area">Question type: {{question.type}}</div>
		div style="border-bottom:12 px solid black;"
		<div id="question_description" style="background-color: rgba(175, 0, 0, 0.3);border:10 px solid black;background-color:white;">Question {{#inc}}{{currentQnNumber}}{{/inc}}<br><br>
			{{question.question}}
			<form id="question_form" method="post" action="/student/saveAndNavigate">
			{{#ife question.type 'mcq'}}
				{{#each question.options}}
					<p><input type="radio" name="ans" value="{{.}}">{{.}}</p>
				{{/each}}
			{{/ife}}
			{{#ife question.type 'msq'}}
				{{#each question.options}}
					<p><input type="checkbox" name="ans" value="{{.}}">{{.}}</p>
				{{/each}}
			{{/ife}}
			
		</div>
		<div id="Marks_section">
		<br><br><br><br>
			<div style="//background-color:white;">Marks {{question.marks}}</div><br>
			Bookmark qn &nbsp; <i class="fa fa-bookmark" id="edit" style="cursor:pointer;color:grey;"></i>
		/div-->
		<div id="main_area">
			<div id="details">
        	Test-2
				<div id="questionType" style="margin-top:1%;">
					Select one of the following Types :
					<select name="qtypes" style="border-radius:5px;" onchange="caterType(this)">
						<option value="schoice">Single Correct Choice Type</option>
						<option value="mchoice">Multi Correct Choice Type</option>
						<option value="subjective">Subjective Type</option>
						<option value="integer">Integer Type</option>
					</select>
				</div>
			</div>
			<div id="holds">
				<div id="qstn"> Question <textarea name="question" cols="100" rows="4" id="question" placeholder="Type in Question ..."></textarea>
				</div>
				<div id="options">
					<div id="optionsSoFar"></div>
					<textarea name="option" cols="100" rows="2" id="option" placeholder="Type in Option ..."></textarea> <button style="border-radius:5px;width:max-content;height: fit-content;" onclick="createOption('single')">Create Option</button>
				</div>

				<div id="limits">
					<p>Duration : <input type="text"> minutes </p>
					<p>Marks : <input type="text"> marks </p>
					<p>Feedback :</p> 
					<p><textarea name="feedback" cols="100" rows="1" id="feedback" placeholder="Feedback..."></textarea></p>
				</div>
			</div>
			<div id="action_area">
				<button class = "action_items" >Previous</button>
				<button class = "action_items" >Save and Next</button>
				<button class = "action_items" >Mark for Review and Next</button>
				<button class = "action_items" >Delete Question</button>
			</div>
        </div>

    </div>		
	</div>

	<div id="evaluation_panel" style="display:inline;">
		
		<form action="/teacher/makeQuestions" method="post">
			<div class="row" style="padding:4%">
				<div class="label">Quiz Title</div>
				<div class="input"><input type="text" name="qtitle" value="{{qtitle}}"></div>
			</div>
			<div class="row" style="padding:4%">
				<div class="label">Duration</div>
				<div class="input"><input type="text" name="duration" value="{{duration}}"></div>
			</div>
			<div class="row" style="padding:4%">
				<div class="label">Maximum Marks</div>
				<div class="input"><input type="text" name="marks" value="{{marks}}"></div>
			</div>
			<div class="row" style="padding:4%">
				<div class="label">Passkey</div>
				<div class="input"><input type="text" name="passkey" maxlength="6" value="{{passkey}}"></div>
			</div>
			<div class="row" style="padding:4%">
				<div>Instructions</div>
				<textarea name="instructions" rows="2" cols="30" name="instructions" style="padding:2%">{{instructions}}</textarea>
			</div>
			<div style="padding-left:35%;padding-top:0%;">
				<button type="hidden" value="{{qzid}}" style="border-radius:20px;cursor:pointer;padding:2%">Update</button>
			</div>
		</form>
		
	</div>

	<div id="right_panel">
		<div style="background-color:#c6e2ff;border:1px solid black;text-align:center">Questions Palette</div>
		<div id="questions_panel">{{#each questions}}<button class="qn_button" onclick="addToForm(this)">{{#inc}}{{@index}}{{/inc}}</button><input type="hidden" name="toQnum" value="{{@index}}">{{/each}}
		</div>
		
	</div>
</div>
<script>
	function addToForm(node)
	{
		let qform = document.getElementById("question_form");
		//alert(qform);
		let navinp = node.nextSibling;
		//navinp.setAttribute("value",node.innerHTML);
		qform.appendChild(node.nextSibling);

		//alert(qform.lastChild.getAttribute("type"));
		qform.submit();
	}
	/*function appendQnNo(node)
	{
		//onsubmit="appendQnNo(this)"
		//<input type="hidden" name="qnum" value="{{@index}}">
		let cn = node.firstChild;
		let qnum = cn.innerHTML;
		let action = node.getAttribute('action');
		let qnlink = (action + qnum);
		node.setAttribute('action',qnlink);
		node.submit();
		
	}*/
</script>
<!-- </div> -->
</body>
</html>